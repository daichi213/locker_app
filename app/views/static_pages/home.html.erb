<% provide(:title, "Home") %>

<div class='row'>
    <div class='container'>
        <% if logged_in? %>
            <% if flash[:request] %>
                <h1 class='receive_message'><%= flash[:receive_message] %></h1>
            <% end %>

            <div class='request-message'>
                <h1>
                    <% if current_user.picture? %>
                        <%= image_tag current_user.picture.thumb50.url %>
                    <% else %>
                        <%= image_tag "/uploads/user/picture/thumb50_default.jpg" %>
                    <% end %>
                    <%= current_user.name %>
                </h1>
            </div>

            <!-- Google map -->
            <div id="map"></div>
            <script>
                var map;
                function initMap() {
                    map = new google.maps.Map(document.getElementById('map'), {
                        // TODO 中心位置を現在位置へと変更する。getLocationの返却値を設定する。
                    center: {lat: gon.current_user.latitude, lng: gon.current_user.longitude},
                    zoom: 17
                    });
                }
            </script>
            <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDCf-kPe1Xxxn8dUeYWJ8i2BpTpHVwN1AM&callback=initMap"
            async defer></script>
        <% else %>

        <% end %>
    </div>
</div>